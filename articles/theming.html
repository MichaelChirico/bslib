<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom themes • bslib</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Custom themes">
<meta property="og:description" content="bslib">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bslib</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/theming.html">Custom themes</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rstudio/bslib/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="theming_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Custom themes</h1>
                        <h4 class="author">Carson Sievert</h4>
            
            <h4 class="date">2021-01-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/bslib/blob/master/vignettes/theming.Rmd"><code>vignettes/theming.Rmd</code></a></small>
      <div class="hidden name"><code>theming.Rmd</code></div>

    </div>

    
    
<style type="text/css">
div.info{padding:2em;margin:1em 0;padding-left:100px;background-size:70px;background-repeat:no-repeat;background-position:15px center;min-height:120px;color:#1f5386;background-color:#bed3ec;border:solid 5px #dfedff;background-image:url("infobox.svg")}div.info a{color:#e783b8}
</style>
<p>This article demonstrates how to create custom themes for Shiny apps, R Markdown documents, and more using <a href="https://rstudio.github.io/bslib/">bslib</a>. For the sake of novelty, this article uses some Bootstrap 4 specific features like <a href="#utility-classes">Utility Classes</a>, but some of the more basic options like Main Colors &amp; Fonts and Sass variables are also available for Bootstrap 3.</p>
<div id="main-colors-fonts" class="section level2">
<h2 class="hasAnchor">
<a href="#main-colors-fonts" class="anchor"></a>Main colors &amp; fonts</h2>
<p><code><a href="../reference/bs_theme.html">bs_theme()</a></code> makes it easy to customize the main colors and fonts of most Shiny apps and R Markdown documents. Any <code><a href="../reference/bs_theme.html">bs_theme()</a></code> may be provided to any <a href="/index.html#shiny-usage">Shiny app</a> and any <a href="/index.html#r-markdown-usage">R Markdown document</a> powered by Bootstrap, but for sake of demonstration here we’ll provide it to <code><a href="../reference/bs_theme_preview.html">bs_theme_preview()</a></code>, which runs a Shiny app designed for previewing and customizing themes.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/bslib/">bslib</a></span><span class="op">)</span>
<span class="va">material</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>
  bg <span class="op">=</span> <span class="st">"#202123"</span>, 
  fg <span class="op">=</span> <span class="st">"#B8BCC2"</span>, 
  primary <span class="op">=</span> <span class="st">"#EA80FC"</span>, 
  secondary <span class="op">=</span> <span class="st">"#00DAC6"</span>,
  success <span class="op">=</span> <span class="st">"#4F9B29"</span>,
  info <span class="op">=</span> <span class="st">"#28B3ED"</span>,
  warning <span class="op">=</span> <span class="st">"#FD7424"</span>,
  danger <span class="op">=</span> <span class="st">"#F7367E"</span>,
  base_font <span class="op">=</span> <span class="fu"><a href="../reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Open Sans"</span><span class="op">)</span>,
  heading_font <span class="op">=</span> <span class="fu"><a href="../reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Proza Libre"</span><span class="op">)</span>,
  code_font <span class="op">=</span> <span class="fu"><a href="../reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Fira Code"</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="va">material</span>, with_themer <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="material-dark.png" width="100%" style="display: block; margin: auto;"></p>
<p>Themes may also be interactively customized when <code>with_themer = TRUE</code>. This overlays <code><a href="../reference/run_with_themer.html">bs_themer()</a></code> on the demo app, an interactive theming tool to play with different colors, fonts, and various other main options. <a href="https://testing-apps.shinyapps.io/themer-demo/">See here</a> for a live demo, but note that when <code><a href="../reference/run_with_themer.html">bs_themer()</a></code> runs locally, it emits R code in the console to replicate the interactive changes.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="va">material</span>, with_themer <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><iframe src="https://player.vimeo.com/video/465527125?title=0&amp;byline=0&amp;portrait=0" width="100%" height="400" frameborder="0" seamless="seamless" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>
<p>Among the main coloring choices in <code><a href="../reference/bs_theme.html">bs_theme()</a></code>, <code>bg</code>, <code>fg</code>, and <code>primary</code> are by far the most important as they effect nearly every color on the page. In fact, <code>bg</code> and <code>fg</code> alone impact 100s of defaults — everything from inputs to wells (e.g., <code><a href="https://rdrr.io/pkg/shiny/man/wellPanel.html">shiny::wellPanel()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/inputPanel.html">shiny::inputPanel()</a></code>, etc) to navigation (e.g., <code><a href="https://rdrr.io/pkg/shiny/man/navbarPage.html">shiny::navbarPage()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">shiny::tabsetPanel()</a></code>, etc) and more. The accent colors don’t impact nearly as much, but <code>primary</code> does control the color for some important things like hyperlinks, <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">shiny::tabsetPanel()</a></code> links, accent/focus colors for inputs, and more. That being said, other accent colors can be handy for customizing things like <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">shiny::actionButton()</a></code> (defaults to the <code>secondary</code> color), <code><a href="https://rdrr.io/pkg/shiny/man/showNotification.html">shiny::showNotification()</a></code> , or more generally any HTML content that leverages <a href="https://getbootstrap.com/docs/4.4/utilities/colors/">Color Utility Classes</a>.</p>
<p>There are 3 main controls for font families in <code><a href="../reference/bs_theme.html">bs_theme()</a></code>, namely <code>base_font</code>, <code>heading_font</code>, and <code>code_font</code>. To focus and customize each setting, go to the “Fonts” tab in the top navbar, as well as in interactive themer. It’s worth noting that the interactive themer has a special ability to render <a href="https://fonts.google.com">Google Fonts</a> in real-time by downloading, caching, and importing font file(s) as needed (via <code><a href="../reference/font_face.html">font_google()</a></code>).</p>
<div class="info">
<p>When choosing fonts, keep in mind that it’s generally good practice to put serif fonts in <code>base_font</code>, sans-serif fonts in <code>heading_font</code>, and monospace fonts in <code>code_font</code>. If you aren’t sure where to start, <a href="https://fontpair.co/featured">this article</a> has a nice gallery of Google Font pairings.</p>
</div>
<p><img src="fonts.png" width="100%" style="display: block; margin: auto;"></p>
<p>When using <a href="https://www.w3schools.com/cssref/css_websafe_fonts.asp">web safe font combinations</a>, it’s ok to provide a character string of (comma-separated) font families (e.g., <code><a href="../reference/bs_theme.html">bs_theme(base_font = '"Times New Roman", Times, serif')</a></code>. Otherwise, use one of the <code><a href="../reference/font_face.html">font_google()</a></code>, <code><a href="../reference/font_face.html">font_link()</a></code>, and/or <code><a href="../reference/font_face.html">font_face()</a></code> helpers to include the relevant file(s) so the client’s browser may render the font(s). <code><a href="../reference/font_face.html">font_link()</a></code> and <code><a href="../reference/font_face.html">font_face()</a></code> are fairly low-level interfaces to <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Web_fonts">the CSS web font API</a>, but <code><a href="../reference/font_face.html">font_google()</a></code> has the additional ability to download and cache font file(s), making it so that an internet connection is needed only for the first time a particular font is used.</p>
</div>
<div id="sass-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#sass-variables" class="anchor"></a>Sass variables</h2>
<div class="info">
<p>If you aren’t already familiar with how Sass and Sass variables work, we recommend reading <a href="https://rstudio.github.io/sass/articles/sass.html">this article</a> before continuing.</p>
</div>
<p>Any of the main color and font settings work for any Bootstrap <code>version</code>, but <code><a href="../reference/bs_theme.html">bs_theme()</a></code> also allows control over specific <a href="https://getbootstrap.com/docs/4.5/getting-started/theming/#variable-defaults">Bootstrap Sass variables</a> that are likely to different across <code>versions</code>. Thus, it’s best practice to ‘lock-in’ the Bootstrap <code>version</code> when setting Sass variable(s) directly. Here we set Bootstrap 4’s <a href="https://github.com/rstudio/bslib/blob/0e936dc/inst/lib/bootstrap/scss/_variables.scss#L282">$font-size-base variable</a> to increase the sizing of all the fonts on a solarized theme.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">theme_solar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>
  bg <span class="op">=</span> <span class="st">"#002B36"</span>, 
  fg <span class="op">=</span> <span class="st">"#EEE8D5"</span>,
  primary <span class="op">=</span> <span class="st">"#2AA198"</span>,
  base_font <span class="op">=</span> <span class="fu"><a href="../reference/font_face.html">font_google</a></span><span class="op">(</span><span class="st">"Grandstander"</span><span class="op">)</span>,
  version <span class="op">=</span> <span class="fl">4</span>,
  <span class="st">"font-size-base"</span> <span class="op">=</span> <span class="st">"1.1rem"</span>
<span class="op">)</span>
<span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="va">theme_solar</span>, with_themer <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="solar-theme.png" width="100%" style="display: block; margin: auto;"></p>
<p>If you skim through the full list of <a href="https://github.com/rstudio/bslib/blob/master/inst/lib/bootstrap/scss/_variables.scss">Bootstrap 4</a> (<a href="https://github.com/rstudio/bslib/blob/master/inst/lib/bootstrap-sass/assets/stylesheets/bootstrap/_variables.scss">or 3</a>) Sass variables, you’ll notice <em>lots</em> of variable settings. Towards the top are the main settings like <a href="https://github.com/rstudio/bslib/blob/0e936dc/inst/lib/bootstrap/scss/_variables.scss#L6-L34">the <code>bg</code> / <code>fg</code> color system</a> and <a href="https://github.com/rstudio/bslib/blob/0e936dc/inst/lib/bootstrap/scss/_variables.scss#L36-L89">theme colors</a>, but as you work your way down the file, you’ll notice variables becoming more and more specific. For example, <a href="https://github.com/rstudio/bslib/blob/0e936dcd/inst/lib/bootstrap/scss/_variables.scss#L1003"><code>$progress-bar-bg</code> defaults to <code>primary</code></a>, but we can change that default directly, which will customize <code><a href="https://rdrr.io/pkg/shiny/man/Progress.html">shiny::Progress</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="st">"progress-bar-bg"</span> <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="progress-orange.png" width="50%" style="display: block; margin: auto;"></p>
<p>This works because <code>orange</code> is a valid CSS color string, but what happens if we attempt to define <code>$progress-bar-bg</code> using other Bootstrap Sass variable(s)? For example, instead of <code>orange</code>, let’s set it to <code>$gray-800</code> (that is, 80% <code>fg</code> and 20% <code>bg</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="st">"progress-bar-bg"</span> <span class="op">=</span> <span class="st">"$gray-800"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#&gt; Error: Undefined variable: "$gray-800"</span></code></pre></div>
<p>This doesn’t work because <code><a href="../reference/bs_theme.html">bs_theme()</a></code> places variable defaults <em>before</em> Bootstrap variable definitions; however, if we use <code><a href="../reference/bs_add_variables.html">bs_add_variables()</a></code> with <code>.where = "declarations"</code>, then the variable is placed <em>after</em> Bootstrap variables, making it possible to reference Bootstrap variables (just make sure the variable definition doesn’t include a <code>!default</code> flag)!</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="st">"progress-bar-bg"</span> <span class="op">=</span> <span class="st">"$gray-800"</span><span class="op">)</span><span class="op">$</span><span class="va">defaults</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">/* Sass */</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>$progress-bar-bg<span class="in">: $gray-800</span> !default;</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="im">@import</span> <span class="st">"bootstrap/scss/_variables.scss"</span><span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/bs_add_variables.html">bs_add_variables</a></span><span class="op">(</span>
    <span class="st">"progress-bar-bg"</span> <span class="op">=</span> <span class="st">'$gray-800'</span>, 
    .where <span class="op">=</span> <span class="st">"declarations"</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="progress-gray.png" width="50%" style="display: block; margin: auto;"></p>
</div>
<div id="utility-classes" class="section level2">
<h2 class="hasAnchor">
<a href="#utility-classes" class="anchor"></a>Utility classes</h2>
<p>Bootstrap 4 comes with a suite of handy utility classes for handling common yet fickle styling issues like <a href="https://getbootstrap.com/docs/4.4/utilities/spacing/">spacing</a>, <a href="https://getbootstrap.com/docs/4.4/utilities/borders/">borders</a>, <a href="https://getbootstrap.com/docs/4.4/utilities/sizing/">sizing</a>, <a href="https://getbootstrap.com/docs/4.4/utilities/flex/">layout</a>, <a href="https://getbootstrap.com/docs/4.4/utilities/colors/">colors</a>, and more. In fact, if you look at <a href="https://github.com/rstudio/bslib/tree/master/inst/themer-demo">the source</a> for the theme demo app, the <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton()</a></code> logic makes use of the margin spacing (<code>m-2</code>) to add some spacing between the buttons (they also make use of <a href="https://getbootstrap.com/docs/4.4/components/buttons/">button modifier classes</a> to achieve their different background colors).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"primary"</span>, <span class="st">"Primary"</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"product-hunt"</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"btn-primary m-2"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"secondary"</span>, <span class="st">"Secondary (default)"</span>, class <span class="op">=</span> <span class="st">"m-2"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton</a></span><span class="op">(</span><span class="st">"success"</span>, <span class="st">"Success"</span>, <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"check"</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"btn-success m-2"</span><span class="op">)</span></code></pre></div>
<p>It’s worth noting that <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton()</a></code>, like many other core shiny UI components, doesn’t actually have an explicit <code>class</code> argument, but it does route implicit arguments (i.e., <code>...</code>) to it’s top-level HTML tag, which is why <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton(..., class = "btn-primary")</a></code> add the class in the appropriate place. Another place where this top-level <code>class</code> can be useful is for customizing the body of a <code><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel()</a></code> .</p>
<p>By default, tabset panels don’t come with any padding or border(s) around the body’s content, which can make it appears though the content is just floating in space:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"No padding"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Very sad!"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="tab-before.png" width="67%" style="display: block; margin: auto;"></p>
<p>We can help solve this issue by adding some padding the tab’s content (<code>p-3</code>) as well as a nice border that matches up with the tab’s borders.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tab</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="va">...</span>, class <span class="op">=</span> <span class="st">"p-3 border border-top-0 rounded-bottom"</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span>
  <span class="fu">tab</span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"With padding"</span><span class="op">)</span>,
  <span class="fu">tab</span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Nice!"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="tab-after.png" width="67%" style="display: block; margin: auto;"></p>
<p>And for <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel(type="pills")</a></code> , it looks a bit better to have a full, rounded, border:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pill</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel</a></span><span class="op">(</span><span class="va">...</span>, class <span class="op">=</span> <span class="st">"p-3 border rounded"</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span>
  type <span class="op">=</span> <span class="st">"pills"</span>,
  <span class="fu">pill</span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"With padding"</span><span class="op">)</span>,
  <span class="fu">pill</span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Nice!"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="pills.png" width="67%" style="display: block; margin: auto;"></p>
<p>It’s also worth noting that you can also add these classes to <a href="https://bookdown.org/yihui/rmarkdown-cookbook/html-tabs.html">rmarkdown tabsets</a>, like so:</p>
<p><img src="rmarkdown-tabs-source.png" width="50%" style="display: block; margin: auto;"></p>
<p><img src="rmarkdown-tabs.png" width="100%" style="display: block; margin: auto;"></p>
<p>Unfortunately, we can’t generally rely on the <code>class</code> argument placing classes on the top-level HTML tag to achieve our styling goals and may need to target children of the top-level tag. For example, if we wanted to horizontally align a <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel()</a></code>, we’d have to append a class to it’s first child (i.e., the <code>.nav</code> container).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabsetPanelCentered</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>
  <span class="va">x</span><span class="op">$</span><span class="va">children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tag.html">tagAppendAttributes</a></span><span class="op">(</span>
    <span class="va">x</span><span class="op">$</span><span class="va">children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, class <span class="op">=</span> <span class="st">"justify-content-center"</span>
  <span class="op">)</span>
  <span class="va">x</span>
<span class="op">}</span>
<span class="fu">tabsetPanelCentered</span><span class="op">(</span>
  type <span class="op">=</span> <span class="st">"pills"</span>,
  <span class="fu">pill</span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"With padding"</span><span class="op">)</span>,
  <span class="fu">pill</span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Nice!"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="pills.png" width="67%" style="display: block; margin: auto;"></p>
<p>Beware, however, that <code>tabsetPanelCentered()</code> makes very strong assumptions about the HTML structure of <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel()</a></code> . It’d be better practice to leverage the power of <a href="https://sass-lang.com/documentation/at-rules/extend">Sass’s @extend rule</a> to make all navs horizontally centered:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="../reference/bs_add_variables.html">bs_add_rules</a></span><span class="op">(</span><span class="st">".nav { @extend .justify-content-center }"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span>
    type <span class="op">=</span> <span class="st">"pills"</span>,
    <span class="fu">pill</span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"With padding"</span><span class="op">)</span>,
    <span class="fu">pill</span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Nice!"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Or scoped to a specific <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel()</a></code> ’s <code>id</code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/bs_add_variables.html">bs_add_rules</a></span><span class="op">(</span><span class="st">"#my-nav { @extend .justify-content-center }"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel</a></span><span class="op">(</span>
    type <span class="op">=</span> <span class="st">"pills"</span>, id <span class="op">=</span> <span class="st">"my-nav"</span>,
    <span class="fu">pill</span><span class="op">(</span><span class="st">"One"</span>, <span class="st">"With padding"</span><span class="op">)</span>,
    <span class="fu">pill</span><span class="op">(</span><span class="st">"Two"</span>, <span class="st">"Nice!"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="dynamic-shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#dynamic-shiny" class="anchor"></a>Dynamic theming in Shiny</h2>
<p>With Shiny, it’s possible to change the <a href="https://rstudio.github.io/bslib/">bslib</a> theme after the initial page load via <code>session$setCurrentTheme()</code>. This can be useful for things like a dark mode <a href="https://getbootstrap.com/docs/4.4/components/forms/#switches">switch</a> for your Shiny app:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">light</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">dark</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>bg <span class="op">=</span> <span class="st">"black"</span>, fg <span class="op">=</span> <span class="st">"white"</span>, primary <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span>
<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="va">light</span>, 
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"custom-control custom-switch"</span>, 
    <span class="va">tags</span><span class="op">$</span><span class="fu">input</span><span class="op">(</span>
      id <span class="op">=</span> <span class="st">"dark_mode"</span>, type <span class="op">=</span> <span class="st">"checkbox"</span>, class <span class="op">=</span> <span class="st">"custom-control-input"</span>,
      onclick <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span><span class="st">"Shiny.setInputValue('dark_mode', document.getElementById('dark_mode').value);"</span><span class="op">)</span>
    <span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">label</span><span class="op">(</span>
      <span class="st">"Dark mode"</span>, `for` <span class="op">=</span> <span class="st">"dark_mode"</span>, class <span class="op">=</span> <span class="st">"custom-control-label"</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">session</span><span class="op">$</span><span class="fu">setCurrentTheme</span><span class="op">(</span>
      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">dark_mode</span><span class="op">)</span><span class="op">)</span> <span class="va">dark</span> <span class="kw">else</span> <span class="va">light</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p><img src="dark-mode.gif" width="50%" style="display: block; margin: auto;"></p>
<p><code>session$setCurrentTheme()</code> “just works” for existing themeable components (e.g., “core” Shiny UI), but in order for it to work with custom components, the component’s CSS must come from a “dynamic” HTML dependency (i.e., <code><a href="../reference/bs_dependency.html">bs_dependency_defer()</a></code>). To learn more, see <a href="#custom-components">Custom components</a>.</p>
</div>
<div id="themeable-components" class="section level2">
<h2 class="hasAnchor">
<a href="#themeable-components" class="anchor"></a>Themeable components</h2>
<p>HTML components that “just work” well with <a href="https://rstudio.github.io/bslib/">bslib</a> (i.e., their default styles derive from <code><a href="../reference/bs_theme.html">bs_theme()</a></code> settings) currently includes:</p>
<ul>
<li>
<p>All of “core” Shiny UI (e.g., <code><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html">tabPanel()</a></code>, <code><a href="https://rdrr.io/pkg/shiny/man/navbarPage.html">navbarPage()</a></code>, etc.)</p>
<ul>
<li>The one exception is <code><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput()</a></code>, but in that case, <a href="https://rstudio.github.io/thematic/">thematic</a> can be used to make plots themeable via <code><a href="../reference/bs_theme.html">bs_theme()</a></code> (see <a href="#plots">Plots</a>).</li>
</ul>
</li>
<li><p>All of <code><a href="https://rdrr.io/pkg/rmarkdown/man/html_document.html">rmarkdown::html_document()</a></code> specific <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">features</a>.</p></li>
<li><p>Un-styled HTML content (e.g., <code>tags$input(type = "checkbox")</code>).</p></li>
<li><p>Popular HTML table-making packages (currently <strong>DT</strong>, <strong>reactable</strong>, and <strong>gt</strong>, see <a href="#tables">Tables</a>)</p></li>
<li>
<p>Your HTML component/widget? <a href="mailto:carson@rstudio.com">Let us know if you have one</a>!</p>
<ul>
<li>Learn how to create them in <a href="#custom-components">Custom components</a>.</li>
</ul>
</li>
</ul>
<p>At the moment, custom components (e.g., <code>{shinyWidgets}</code>, <a href="https://github.com/ramnathv/htmlwidgets">htmlwidgets</a>, etc) aren’t necessarily themeable (via <a href="https://rstudio.github.io/bslib/">bslib</a>); but fortunately, <a href="https://rstudio.github.io/bslib/">bslib</a> provides the tools for making custom content themeable. Over time, we’re hoping package authors will leverage these tools to make their custom components themeable by default, but app authors can also leverage these tools to translate themes to whatever styling API they need.</p>
<div id="plots" class="section level3" data-link="Plots">
<h3 class="hasAnchor">
<a href="#plots" class="anchor"></a>Plots</h3>
<p><a href="https://rstudio.github.io/bslib/">bslib</a> itself doesn’t do anything special to make static R plots respect Bootstrap CSS, but thanks to the <a href="https://rstudio.github.io/thematic/"><code>{thematic}</code> package</a>, you can include <code>thematic_shiny()</code> in your Shiny apps and <code>thematic_rmd()</code> in your R Markdown documents to gain new, intelligent, styling defaults based on the <a href="https://rstudio.github.io/bslib/">bslib</a> theme (BTW, <a href="https://rstudio.github.io/thematic/">thematic</a> can also be used to theme plots without Bootstrap). Note that, the demo app included with <code><a href="../reference/bs_theme_preview.html">bs_theme_preview()</a></code> includes a call to <code>thematic_shiny(font = "auto")</code> to enable real-time theming of plots.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span>
  <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>bg <span class="op">=</span> <span class="st">"#444444"</span>, fg <span class="op">=</span> <span class="st">"#E4E4E4"</span>, primary <span class="op">=</span> <span class="st">"#E39777"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><iframe src="https://player.vimeo.com/video/411238499?title=0&amp;byline=0&amp;portrait=0" width="100%" height="400" frameborder="0" seamless="seamless" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>
<p>As you’ll see in the next section on <a href="#tables">Tables</a>, with a bit of effort, it’s possible to translate <a href="https://rstudio.github.io/bslib/">bslib</a> theme settings to other package’s theme setting today, but our hope is that with time and help from the R community, we’ll get most popular packages working well <a href="https://rstudio.github.io/bslib/">bslib</a> .</p>
</div>
<div id="tables" class="section level3">
<h3 class="hasAnchor">
<a href="#tables" class="anchor"></a>Tables</h3>
<p>For a preview of custom HTML tables that can derive their default styles from a <a href="https://rstudio.github.io/bslib/">bslib</a> theme, navigate to the “Tables” tab of the demo app:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/bs_theme_preview.html">bs_theme_preview</a></span><span class="op">(</span><span class="va">material</span><span class="op">)</span></code></pre></div>
<p><img src="DT-material.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="custom-components" class="section level3">
<h3 class="hasAnchor">
<a href="#custom-components" class="anchor"></a>Custom components</h3>
<div id="a-basic-themeable-component" class="section level4">
<h4 class="hasAnchor">
<a href="#a-basic-themeable-component" class="anchor"></a>A basic themeable component</h4>
<p>Before going through a full-blown <a href="#dynamic-shiny">dynamically themeable</a> custom component, let’s start from a relatively straight-forward example of implementing a custom <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> component. Say we have the following R function to generate some HTML with classes that we’ll write custom Sass/CSS styles for:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">person</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">title</span>, <span class="va">company</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"person"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"name"</span>, <span class="va">name</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"title"</span>, <span class="va">title</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"company"</span>, <span class="va">company</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>And here’s some custom Sass to style those classes. Since these Sass rules listen to Bootstrap Sass variables like <code>$gray-600</code>, <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> styles works great with different <code><a href="../reference/bs_theme.html">bs_theme()</a></code> input:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">.person</span> {</span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="kw">padding</span>: $spacer<span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="kw">border</span>: $border-width <span class="dv">solid</span> $border-color<span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="im">@include</span> border-radius<span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="im">@include</span> box-shadow<span class="op">;</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="kw">outline</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>  <span class="kw">width</span>: <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="fu">.title</span> {</span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>  }</span>
<span id="cb21-12"><a href="#cb21-12"></a>  <span class="fu">.title</span><span class="op">,</span> <span class="fu">.company</span> {</span>
<span id="cb21-13"><a href="#cb21-13"></a>    <span class="kw">color</span>: $gray-600<span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>  }</span>
<span id="cb21-15"><a href="#cb21-15"></a>  <span class="kw">margin</span>: $grid-gutter-width<span class="op">;</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>  <span class="kw">margin-right</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-17"><a href="#cb21-17"></a>  <span class="er">// On mobile, span entire width</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>  <span class="im">@include</span> media-breakpoint-down<span class="fu">(</span>sm<span class="fu">)</span> {</span>
<span id="cb21-19"><a href="#cb21-19"></a>    <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></span>
<span id="cb21-20"><a href="#cb21-20"></a>    <span class="kw">width</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb21-21"><a href="#cb21-21"></a>    <span class="kw">margin-right</span>: $grid-gutter-width<span class="op">;</span></span>
<span id="cb21-22"><a href="#cb21-22"></a>  }</span>
<span id="cb21-23"><a href="#cb21-23"></a>}</span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="fu">.person</span><span class="in">:last-of-type</span> {</span>
<span id="cb21-25"><a href="#cb21-25"></a>  <span class="kw">margin-right</span>: $grid-gutter-width<span class="op">;</span></span>
<span id="cb21-26"><a href="#cb21-26"></a>}</span></code></pre></div>
<p>If we were to save these Sass rules to a file named <code>person.scss</code>, then we can then <code><a href="../reference/bs_add_variables.html">bs_add_rules()</a></code> to the <code><a href="../reference/bs_theme.html">bs_theme()</a></code> and use our themeable <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> component like so:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu"><a href="../reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>bg <span class="op">=</span> <span class="st">"#002B36"</span>, fg <span class="op">=</span> <span class="st">"#EEE8D5"</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/bs_add_variables.html">bs_add_rules</a></span><span class="op">(</span><span class="fu">sass</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sass/man/sass_import.html">sass_file</a></span><span class="op">(</span><span class="st">"person.scss"</span><span class="op">)</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span><span class="st">"Andrew Carnegie"</span>, <span class="st">"Owner"</span>, <span class="st">"Carnegie Steel Company"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span><span class="st">"John D. Rockefeller"</span>, <span class="st">"Chairman"</span>, <span class="st">"Standard Oil"</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span><span class="op">)</span></code></pre></div>
<p><img src="person.png" width="67%" style="display: block; margin: auto;"></p>
</div>
<div id="dynamically-themeable-component" class="section level4">
<h4 class="hasAnchor">
<a href="#dynamically-themeable-component" class="anchor"></a>Dynamically themeable component</h4>
<p>To make the custom <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> component <em>dynamically</em> themeable (i.e., make it work with <code>session$setCurrentTheme()</code>), we need an R function that generates an <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmltools::htmlDependency()</a></code> from a given <code>theme</code>. While not required, suppose this function, <code>person_dependency</code>, lives in an R package called <code>{mypkg}</code> which includes the <code>person.scss</code> (and pre-compiled <code>person.css</code>) file under the <code>inst/</code> directory. Then we could do the following:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"person"</span>
<span class="va">version</span> <span class="op">&lt;-</span> <span class="st">"1.0.0"</span>
<span class="va">person_dependency</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">theme</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="../reference/bs_theme.html">is_bs_theme</a></span><span class="op">(</span><span class="va">theme</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">scss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"mypkg"</span>, <span class="st">"person.scss"</span><span class="op">)</span>
    <span class="fu"><a href="../reference/bs_dependency.html">bs_dependency</a></span><span class="op">(</span>
      input <span class="op">=</span> <span class="fu">sass</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sass/man/sass_import.html">sass_file</a></span><span class="op">(</span><span class="va">scss</span><span class="op">)</span>,
      theme <span class="op">=</span> <span class="va">theme</span>,
      name <span class="op">=</span> <span class="va">name</span>,
      version <span class="op">=</span> <span class="va">version</span>
    <span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="va">name</span>,
      version <span class="op">=</span> <span class="va">version</span>,
      stylesheet <span class="op">=</span> <span class="st">"person.css"</span>,
      package <span class="op">=</span> <span class="st">"mypkg"</span>,
      all_files <span class="op">=</span> <span class="cn">FALSE</span>
    <span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="co">#' @export</span>
<span class="va">person</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">title</span>, <span class="va">company</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"person"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"name"</span>, <span class="va">name</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"title"</span>, <span class="va">title</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"company"</span>, <span class="va">company</span><span class="op">)</span>,
    <span class="fu"><a href="../reference/bs_dependency.html">bs_dependency_defer</a></span><span class="op">(</span><span class="va">person_dependency</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Note that when <code>theme</code> is a <code><a href="../reference/bs_theme.html">bs_theme()</a></code> object, then <code>person.scss</code> is compiled with Bootstrap Sass variables and mixins included via <code><a href="../reference/bs_dependency.html">bs_dependency()</a></code> (which returns the compiled CSS as an <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency()</a></code>). Otherwise, if <code>theme</code> is <em>not</em> a <code><a href="../reference/bs_theme.html">bs_theme()</a></code> object, then <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> is being used in a context where <a href="https://rstudio.github.io/bslib/">bslib</a> is not relevant, so a pre-compiled CSS file is returned instead. Pre-complied CSS isn’t necessarily a requirement, but it’s a good idea for increasing performance and reducing software dependencies for end users.</p>
</div>
<div id="html-widgets" class="section level4">
<h4 class="hasAnchor">
<a href="#html-widgets" class="anchor"></a>HTML widgets</h4>
<p>For <a href="https://github.com/ramnathv/htmlwidgets">htmlwidgets</a> that can be themed via CSS, we recommend supplying a <code><a href="../reference/bs_dependency.html">bs_dependency_defer()</a></code> to the <code>dependencies</code> argument of <code>createWidget()</code> (similar to the <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> component from the last section), which will make the widget dynamically themeable. For widgets that can <em>not</em> be themed via CSS, the best option may be to query the active theme inside a <code>preRenderHook()</code> via <code><a href="../reference/bs_current_theme.html">bs_current_theme()</a></code>, and then translate any relevant information to the widget’s instance data, for example:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_widget</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">createWidget</span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"mywidget"</span>, <span class="va">...</span>,
    preRenderHook <span class="op">=</span> <span class="va">my_widget_hook</span>
  <span class="op">)</span>
<span class="op">}</span>
<span class="va">my_widget_hook</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">instance</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="../reference/bs_current_theme.html">bs_current_theme</a></span><span class="op">(</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="../reference/bs_theme.html">is_bs_theme</a></span><span class="op">(</span><span class="va">theme</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">instance</span><span class="op">)</span>
  <span class="op">}</span>
  <span class="va">instance</span><span class="op">$</span><span class="va">x</span><span class="op">$</span><span class="va">theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html">modifyList</a></span><span class="op">(</span>
    <span class="va">instance</span><span class="op">$</span><span class="va">x</span><span class="op">$</span><span class="va">theme</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span>
      <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="../reference/bs_get_variables.html">bs_get_variables</a></span><span class="op">(</span><span class="va">theme</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"bg"</span>, <span class="st">"fg"</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
  <span class="va">instance</span>
<span class="op">}</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Carson Sievert, Joe Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '748f014f6e0f347e139ecb794914063d',
    indexName: 'rstudio_bootstraplib',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
